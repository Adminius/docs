"use strict";(self.webpackChunkevcc_docs=self.webpackChunkevcc_docs||[]).push([[4549],{4195:(e,n,i)=>{i.d(n,{ZP:()=>a});var s=i(5893),r=i(1151);function t(e){const n={a:"a",admonition:"admonition",p:"p",...(0,r.a)(),...e.components};return(0,s.jsx)(n.admonition,{title:"Sponsor-Token erforderlich",type:"tip",children:(0,s.jsxs)(n.p,{children:["Weitere Informationen zum \ud83d\udc9a evcc Sponsorship gibt es ",(0,s.jsx)(n.a,{href:"/docs/sponsorship",children:"hier"}),"."]})})}function a(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},9667:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>a,default:()=>c,frontMatter:()=>t,metadata:()=>o,toc:()=>l});var s=i(5893),r=i(1151);i(4195);const t={sidebar_position:3},a="Charging",o={id:"guides/charging",title:"Charging",description:"What do the different Charge Modes do?",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/guides/charging.mdx",sourceDirName:"guides",slug:"/guides/charging",permalink:"/en/docs/guides/charging",draft:!1,unlisted:!1,editUrl:"https://github.com/evcc-io/docs/tree/main/i18n/en/docusaurus-plugin-content-docs/current/guides/charging.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Setup & Configuration",permalink:"/en/docs/guides/setup"},next:{title:"Vehicles",permalink:"/en/docs/guides/vehicles"}},h={},l=[{value:"What do the different Charge Modes do?",id:"what-do-the-different-charge-modes-do",level:3},{value:"I have Solar excess, but the vehicle doesn&#39;t charge. Why?",id:"i-have-solar-excess-but-the-vehicle-doesnt-charge-why",level:3},{value:"I have a house battery, and it&#39;s being discharged to charge my vehicle. Help!",id:"i-have-a-house-battery-and-its-being-discharged-to-charge-my-vehicle-help",level:3},{value:"There&#39;s Solar Excess available, but charging has stopped before the vehicle&#39;s target State of Charge has been reached.",id:"theres-solar-excess-available-but-charging-has-stopped-before-the-vehicles-target-state-of-charge-has-been-reached",level:3},{value:"Why is charging proceeding at full power when the vehicle is not recognised?",id:"why-is-charging-proceeding-at-full-power-when-the-vehicle-is-not-recognised",level:3},{value:"&quot;Probleme&quot; i.V.m. Gastfahrzeug",id:"probleme-ivm-gastfahrzeug",level:3},{value:"Notes on RFID",id:"notes-on-rfid",level:3},{value:"Error: Charger out of sync: expected disabled, got enabled // Charger logic error: disabled but charging",id:"error-charger-out-of-sync-expected-disabled-got-enabled--charger-logic-error-disabled-but-charging",level:3},{value:"Solar Production in Winter",id:"solar-production-in-winter",level:3},{value:"Using <code>residualpower</code>",id:"using-residualpower",level:4},{value:"With <code>enable/disable</code>",id:"with-enabledisable",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"charging",children:"Charging"}),"\n",(0,s.jsx)(n.h3,{id:"what-do-the-different-charge-modes-do",children:"What do the different Charge Modes do?"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Mode"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Stop"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"No charging occurs - if a session was in progress, it is stopped immediately."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Fast"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Charging proceeds at the maximum rate possible."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Min + Solar"})}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["Charging proceeds at the ",(0,s.jsx)(n.em,{children:"slowest"})," rate possible. If enough excess solar is available to increase performance, this is made available to the Charger."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"Solar"})}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:["Charging proceeds ",(0,s.jsx)(n.em,{children:"utilising only excess solar power"}),". If excess solar does not exceed the minimum charge rate, charging stops. ",(0,s.jsx)(n.a,{href:"#i-have-solar-excess-but-the-vehicle-doesnt-charge-why",children:"More Details"})]})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"i-have-solar-excess-but-the-vehicle-doesnt-charge-why",children:"I have Solar excess, but the vehicle doesn't charge. Why?"}),"\n",(0,s.jsx)(n.p,{children:"Unfortunately, vehicles cannot be charged with any amount of power desired - there are minimum and maximum rates. These are defined by various standards:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/IEC_61851",children:"IEC 61851"})," (vehicle charging systems) defines a minimum charge speed of 6 Amps per phase,\nand depending on the configuration in ",(0,s.jsx)(n.code,{children:"evcc.yaml"}),", a maximum of 16 or 32 amps."]}),"\n",(0,s.jsx)(n.p,{children:"That means:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Single-Phase Charging"})," - 1.4kW minimum, up to 3.6kW (16A) or 7.2kW (32A)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Two-Phase Charging"})," - 2.8kW minimum, up to 7.2kW (16A) or 14.4kW (32A)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Three-Phase Charging"})," - 4.2kW minimum, up to 11kW (16A) or 22kW (32A)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The newer standard ",(0,s.jsx)(n.a,{href:"https://de.wikipedia.org/wiki/ISO_15118",children:"ISO 15118"})," is supported on DC Chargers, along with a small number of Vehicles and AC Charge Points (this probably doesn't apply to you). This supports a ~1.4kW minimum, regardless of the number of phases."]}),"\n",(0,s.jsxs)(n.p,{children:["When using the Charge Mode ",(0,s.jsx)(n.strong,{children:"Solar"}),", a Solar Excess greater than the minimum relevant value must be available before charging begins. If this Excess is not available, then after a configurable length of time, charging is stopped."]}),"\n",(0,s.jsx)(n.p,{children:"Solar Excess is calculated by monitoring the feed-in power delivered back to the Grid. Excess calculation (and, indeed, the Solar Charge Mode) therefore does not function if this is not available."}),"\n",(0,s.jsx)(n.h3,{id:"i-have-a-house-battery-and-its-being-discharged-to-charge-my-vehicle-help",children:"I have a house battery, and it's being discharged to charge my vehicle. Help!"}),"\n",(0,s.jsx)(n.p,{children:"In general, evcc cannot directly influence charging and discharging of the house battery - the energy management system of that battery is responsible for that."}),"\n",(0,s.jsx)(n.p,{children:"House Batteries generally play by a few sets of rules:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"House battery charges"}),":"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If it's not full (excluding prognosis-based charging) and Solar Surplus is available"}),"\n",(0,s.jsx)(n.li,{children:"If the battery's State of Charge is below a defined minimum level"}),"\n",(0,s.jsx)(n.li,{children:"If the Battery Management System (BMS) determines that some kind of charging is required, e.g for cell balancing"}),"\n",(0,s.jsx)(n.li,{children:"and many, many more other arcane scenarios"}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"House battery does not charge"}),":"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If it's full"}),"\n",(0,s.jsx)(n.li,{children:"If the battery's Energy Management System determines using prognosis-based charging (sometimes using Solar Forecasting and historical consumption) that waiting to charge until later in the day would be a better idea"}),"\n",(0,s.jsx)(n.li,{children:"and many, many more other arcane scenarios"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"With evcc in the mix, there are more possible scenarios:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"Fast"})," and ",(0,s.jsx)(n.code,{children:"Min + Solar"})]})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The House Battery is ignored, because the focus is on charging the vehicle as quickly as possible - regardless of where that energy comes from."}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"Solar"})})}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"evcc regulates the charging power depending on the available Solar Excess."}),"\n",(0,s.jsxs)(n.li,{children:["Charging only starts if the Solar Excess exceeds the minimum required for a configured duration (",(0,s.jsx)(n.a,{href:"/docs/reference/configuration/loadpoints#enable",children:"Standard: 1 Minute"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Charging stops if the Solar Excess falls below this minimum for a configured duration (",(0,s.jsx)(n.a,{href:"/docs/reference/configuration/loadpoints#disable",children:"Standard: 1 Minute"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["However, there may be fluctuations in energy production / consumption that fall outside the configured ",(0,s.jsx)(n.a,{href:"/docs/reference/configuration/interval",children:"Update Interval"}),'. This means that if there is too little Solar Excess, the "missing energy" has to come from somewhere, which usually means that the battery\'s Energy Management System jumps in and supplies energy to ensure that energy is not imported from the grid. This cannot usually be prevented.']}),"\n",(0,s.jsxs)(n.li,{children:["evcc does have some options to help regulate the battery. These include","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/reference/configuration/site#prioritysoc",children:"prioritySoC"})," will prioritise charging the House Battery up until it reaches a defined State of Charge. Once that occurs, battery charging power is interpreted as available Solar Excess (",(0,s.jsx)(n.em,{children:"Vehicle First, Home Second"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/reference/configuration/site#buffersoc",children:"bufferSoC"})," will discharge the House Battery so long as it is above the defined State of Charge (",(0,s.jsx)(n.em,{children:"Battery Supported Charging"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"theres-solar-excess-available-but-charging-has-stopped-before-the-vehicles-target-state-of-charge-has-been-reached",children:"There's Solar Excess available, but charging has stopped before the vehicle's target State of Charge has been reached."}),"\n",(0,s.jsxs)(n.p,{children:["This usually happens when a target State of Charge is set and reached ",(0,s.jsx)(n.em,{children:"on the vehicle itself"}),". Try setting the vehicle's target State of Charge higher than evcc's."]}),"\n",(0,s.jsx)(n.h3,{id:"why-is-charging-proceeding-at-full-power-when-the-vehicle-is-not-recognised",children:"Why is charging proceeding at full power when the vehicle is not recognised?"}),"\n",(0,s.jsx)(n.p,{children:"This happens when evcc's Minimum State of Charge is set to something greater than 0."}),"\n",(0,s.jsx)(n.p,{children:"The Minimum State of Charge feature supplies full power to the Vehicle if its State of Charge is lower than a defined minimum, in order to ensure that some kind of range is always available to use."}),"\n",(0,s.jsx)(n.p,{children:"If the vehicle's State of Charge cannot be determined for some reason, charging starts to ensure that range is always available."}),"\n",(0,s.jsx)(n.h3,{id:"probleme-ivm-gastfahrzeug",children:'"Probleme" i.V.m. Gastfahrzeug'}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"This section is not translated due to unclear German origins. Please contribute an English translation!"})}),"\n",(0,s.jsx)(n.p,{children:"Da man bei einem Gastfahrzeug keine Einstellungen definieren kann, gelten immer die Einstellungen vom Loadpoint."}),"\n",(0,s.jsx)(n.p,{children:"Dies kann zu ung\xfcnstigem Ladeverhalten (z.B. unn\xf6tige Einspeisung) f\xfchren."}),"\n",(0,s.jsx)(n.p,{children:"Beispiele:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Am Loadpoint ist ",(0,s.jsx)(n.code,{children:"phases: 3"})," definiert ist. Das Gastfahrzeug kann aber nur 1-phasig laden. Dann startet die Ladung im PV-Modus trotzdem erst ab 4,2kW \xdcberschuss."]}),"\n",(0,s.jsxs)(n.li,{children:["Am Loadpoint mit automatischer Phasenumschaltung ist ",(0,s.jsx)(n.code,{children:"maxcurrent: 32"})," definiert. Das Gastfahrzeug kann aber nur maximal mit 16A (3,7kW@1p) laden. Dann findet die Phasenumschaltung von 1p auf 3p erst bei 7,4kW \xdcberschuss statt."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Abhilfe schafft hier die Definition eines (oder mehrerer) Offline-Vehicle. Bei diesen k\xf6nnen die entsprechenden Parameter (",(0,s.jsx)(n.code,{children:"phases"}),", ",(0,s.jsx)(n.code,{children:"mincurrent"}),", ",(0,s.jsx)(n.code,{children:"maxcurrent"}),") definiert werden."]}),"\n",(0,s.jsx)(n.h3,{id:"notes-on-rfid",children:"Notes on RFID"}),"\n",(0,s.jsx)(n.p,{children:"Some Chargers start charging as soon as a valid RFID card is presented. evcc should either interrupt charging or throttle it as required after a short delay."}),"\n",(0,s.jsx)(n.h3,{id:"error-charger-out-of-sync-expected-disabled-got-enabled--charger-logic-error-disabled-but-charging",children:"Error: Charger out of sync: expected disabled, got enabled // Charger logic error: disabled but charging"}),"\n",(0,s.jsxs)(n.p,{children:["evcc expects chargers to have switched to their new state before the next check cycle (after the configured ",(0,s.jsx)(n.code,{children:"interval"}),")."]}),"\n",(0,s.jsx)(n.p,{children:"Some devices can sometimes react a little slowly to commands - if this happens, that desynchronisation of state is flagged with these error messages."}),"\n",(0,s.jsxs)(n.p,{children:["If you're not experiencing any other issues, these can safely be ignored, or you can try increasing the ",(0,s.jsx)(n.code,{children:"interval"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"solar-production-in-winter",children:"Solar Production in Winter"}),"\n",(0,s.jsxs)(n.p,{children:["In the Winter months, Solar production is often regularly below the configured ",(0,s.jsx)(n.a,{href:"#i-have-solar-excess-but-the-vehicle-doesnt-charge-why",children:"Minimum"}),". In order to get as much energy into the Vehicle as possible, you can try some of the following tips and tricks:"]}),"\n",(0,s.jsxs)(n.h4,{id:"using-residualpower",children:["Using ",(0,s.jsx)(n.code,{children:"residualpower"})]}),"\n",(0,s.jsxs)(n.p,{children:["In the configuration under the ",(0,s.jsx)(n.a,{href:"/docs/reference/configuration/site",children:(0,s.jsx)(n.code,{children:"site"})})," flag, set ",(0,s.jsx)(n.a,{href:"/docs/reference/configuration/site#residualpower",children:(0,s.jsx)(n.code,{children:"residualPower"})})," to a ",(0,s.jsx)(n.strong,{children:"negative"})," value. This determines how much power the grid can supply to nudge your solar production up enough to cover the minimum. Changes are possible via the API."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Exmaple"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"site:\n  residualPower: -1000 # 1000W grid cover in Solar mode\n"})}),"\n",(0,s.jsx)(n.p,{children:"The disadvantage of this solution is that the grid power is used even when sufficient excess is available."}),"\n",(0,s.jsxs)(n.h4,{id:"with-enabledisable",children:["With ",(0,s.jsx)(n.code,{children:"enable/disable"})]}),"\n",(0,s.jsxs)(n.p,{children:["In the configuration under the ",(0,s.jsx)(n.a,{href:"/docs/reference/configuration/loadpoints",children:(0,s.jsx)(n.code,{children:"loadpoints"})})," flag, you can tweak the ",(0,s.jsx)(n.code,{children:"enable"})," and ",(0,s.jsx)(n.code,{children:"disable"})," logic to suit. Changes to the ",(0,s.jsx)(n.code,{children:"threshold"})," value are possible via the API."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"loadpoints:\n  enable:\n      delay: 1m\n      threshold: -200 # Charging starts when 200w of feed-in occurs for 1 minute.\n    disable:\n      delay: 30m\n      threshold: 1200 # Charging stops when the grid supplies 1.2kW of energy for more than 30 minutes.\n"})})]})}function c(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>a});var s=i(7294);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);