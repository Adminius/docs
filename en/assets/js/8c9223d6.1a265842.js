"use strict";(self.webpackChunkevcc_docs=self.webpackChunkevcc_docs||[]).push([[5947],{6818:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>k,frontMatter:()=>r,metadata:()=>o,toc:()=>s});var a=n(7462),i=(n(7294),n(3905));n(8209);const r={sidebar_position:12},l="messaging",o={unversionedId:"reference/configuration/messaging",id:"reference/configuration/messaging",title:"messaging",description:"evcc supports the transmission of status information via Telegram, PushOver, ntfy, and many other services using the shoutrrr system. The configuration allows defining custom messages for specific events and systems.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/reference/configuration/messaging.md",sourceDirName:"reference/configuration",slug:"/reference/configuration/messaging",permalink:"/en/docs/reference/configuration/messaging",draft:!1,editUrl:"https://github.com/evcc-io/docs/tree/main/i18n/en/docusaurus-plugin-content-docs/current/reference/configuration/messaging.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{sidebar_position:12},sidebar:"tutorialSidebar",previous:{title:"tariffs",permalink:"/en/docs/reference/configuration/tariffs"},next:{title:"eebus",permalink:"/en/docs/reference/configuration/eebus"}},p={},s=[{value:"<code>events</code>",id:"events",level:2},{value:"<code>title</code>",id:"title",level:3},{value:"<code>msg</code>",id:"msg",level:3},{value:"<code>services</code>",id:"services",level:2},{value:"<code>type</code>",id:"type",level:3},{value:"Supported Services",id:"supported-services",level:2},{value:"<code>pushover</code>",id:"pushover",level:3},{value:"<code>telegram</code>",id:"telegram",level:3},{value:"<code>email</code>",id:"email",level:3},{value:"<code>shout</code>",id:"shout",level:3},{value:"<code>ntfy</code>",id:"ntfy",level:3},{value:"<code>script</code>",id:"script",level:3}],m={toc:s},d="wrapper";function k(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"messaging"},(0,i.kt)("inlineCode",{parentName:"h1"},"messaging")),(0,i.kt)("p",null,"evcc supports the transmission of status information via ",(0,i.kt)("a",{parentName:"p",href:"https://telegram.org"},"Telegram"),", ",(0,i.kt)("a",{parentName:"p",href:"https://pushover.net"},"PushOver"),", ",(0,i.kt)("a",{parentName:"p",href:"https://ntfy.sh"},"ntfy"),", and many other services using the ",(0,i.kt)("a",{parentName:"p",href:"https://containrrr.dev/shoutrrr/"},"shoutrrr")," system. The configuration allows defining custom messages for specific events and systems."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"messaging")," defines in sub-elements what and how to send. The events for which messages should be sent must be defined under ",(0,i.kt)("inlineCode",{parentName:"p"},"events")," and the services through which the messages should be sent must be defined under ",(0,i.kt)("inlineCode",{parentName:"p"},"services"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"messaging:\n  events: ...\n  services: ...\n")),(0,i.kt)("h2",{id:"events"},(0,i.kt)("inlineCode",{parentName:"h2"},"events")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"events")," defines the message content for various predefined events."),(0,i.kt)("p",null,"The available events are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"start"),": Charging has started"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"stop"),": Charging has stopped"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"connect"),": Vehicle connected"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"disconnect"),": Vehicle disconnected"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"soc"),": Vehicle battery state of charge changed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"guest"),": Unknown vehicle detected")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'start: # charge start event\n  title: Charge started\n  msg: Started charging in "${mode}" mode\n')),(0,i.kt)("h3",{id:"title"},(0,i.kt)("inlineCode",{parentName:"h3"},"title")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"title")," defines the text for the message title."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"title: Charge started\n")),(0,i.kt)("h3",{id:"msg"},(0,i.kt)("inlineCode",{parentName:"h3"},"msg")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"msg")," defines the text for the message content. Various variables in the format ",(0,i.kt)("inlineCode",{parentName:"p"},"${<variable name>}")," can be used to display evcc information in the text."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"When using variables, make sure to use the correct capitalisation (uppercase/lowercase)!")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Useful messages for use in evcc notifications"),":"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"msg Variable"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"${chargedEnergy:%.1fk}")),(0,i.kt)("td",{parentName:"tr",align:null},"Energy amount charged in kWh")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"${chargeDuration}")),(0,i.kt)("td",{parentName:"tr",align:null},"Charging duration")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"${connectedDuration}")),(0,i.kt)("td",{parentName:"tr",align:null},"Charger connection duration")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"${loadpoint}")),(0,i.kt)("td",{parentName:"tr",align:null},"Number of ",(0,i.kt)("a",{parentName:"td",href:"loadpoints"},(0,i.kt)("inlineCode",{parentName:"a"},"loadpoints"))," (charging point) 1,2...")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"${mode}")),(0,i.kt)("td",{parentName:"tr",align:null},"Active charging mode (see ",(0,i.kt)("a",{parentName:"td",href:"loadpoints/#mode"},(0,i.kt)("inlineCode",{parentName:"a"},"mode"))," of ",(0,i.kt)("a",{parentName:"td",href:"loadpoints"},(0,i.kt)("inlineCode",{parentName:"a"},"loadpoints")),")")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"${pvPower:%.1fk}")),(0,i.kt)("td",{parentName:"tr",align:null},"Currently measured PV power in kW")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"${title}")),(0,i.kt)("td",{parentName:"tr",align:null},"Charging point: Text from ",(0,i.kt)("a",{parentName:"td",href:"loadpoints"},(0,i.kt)("inlineCode",{parentName:"a"},"loadpoints"))," ",(0,i.kt)("a",{parentName:"td",href:"loadpoints/#title"},(0,i.kt)("inlineCode",{parentName:"a"},"title"))," parameter")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"${vehicleTitle}")),(0,i.kt)("td",{parentName:"tr",align:null},"Vehicle: Text from ",(0,i.kt)("a",{parentName:"td",href:"vehicles"},(0,i.kt)("inlineCode",{parentName:"a"},"vehicles"))," ",(0,i.kt)("a",{parentName:"td",href:"vehicles/#title"},(0,i.kt)("inlineCode",{parentName:"a"},"title"))," parameter")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"  # Message examples using evcc variables\n  # start\n  msg: Charger ${title} started charging ${vehicleTitle} in ${mode} mode\n  # stop\n  msg: Charger ${title} finished charging ${vehicleTitle} with ${chargedEnergy:%.1fk}kWh in ${chargeDuration}\n  # connect\n  msg: ${vehicleTitle} connected on Charger ${title} at ${pvPower:%.1fk}kW PV\n  # disconnect\n  msg: ${vehicleTitle} disconnected of Charger ${title} after ${connectedDuration}\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"To render the ",(0,i.kt)("inlineCode",{parentName:"p"},"msg")," texts, you can also use the ",(0,i.kt)("a",{parentName:"p",href:"https://pkg.go.dev/text/template"},"go text/template")," syntax in combination with ",(0,i.kt)("a",{parentName:"p",href:"http://masterminds.github.io/sprig/"},"sprig functions"),"."),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'# Message config using evcc go-text-template rendering, evcc variables and sprig-functions\nmessaging:\n  events:\n    start: # charge start event\n      title: Charge of {{.vehicleTitle}} started\n      msg: |\n        Charger {{.title}} started charging {{.vehicleTitle}} in {{ toString .mode | upper }} mode.\n        --------------------------\n        evcc Status {{printf `(%d-%02d-%02d %02d:%02d:%02d)` now.Year now.Month now.Day now.Hour now.Minute now.Second}}\n        Grid power: {{round (divf .gridPower 1000) 3 }} kW\n        Solar power: {{round (divf .pvPower 1000) 3 }} kW\n        Home consumption: {{round (divf .homePower 1000) 3 }} kW\n        {{if .batteryConfigured}}Battery storage status: {{round (divf .batteryPower 1000) 3 }} kW ({{.batterySoc }} %){{end}}\n    stop: # charge stop event\n      title: Charge of {{.vehicleTitle}} finished\n      msg: |\n        Charger {{.title}} finished charging {{.vehicleTitle}} \n        with {{round (divf .chargedEnergy 1000) 2 }} kWh in {{.chargeDuration}}.\n        --------------------------\n        evcc Status {{printf `(%d-%02d-%02d %02d:%02d:%02d)` now.Year now.Month now.Day now.Hour now.Minute now.Second}}\n        Grid power: {{round (divf .gridPower 1000) 3 }} kW\n        Solar power: {{round (divf .pvPower 1000) 3 }} kW\n        Home consumption: {{round (divf .homePower 1000) 3 }} kW\n        {{if .batteryConfigured}}Battery storage status: {{round (divf .batteryPower 1000) 3 }} kW ({{.batterySoc }} %){{end}}\n    connect: # vehicle connect event\n      title: "{{.vehicleTitle}} connected on Charger {{.title}}"\n      msg: |\n        {{.vehicleTitle}} connected on Charger {{.title}} at {{round (divf .pvPower 1000) 2 }} kW PV.\n        --------------------------\n        evcc Status {{printf `(%d-%02d-%02d %02d:%02d:%02d)` now.Year now.Month now.Day now.Hour now.Minute now.Second}}\n        Grid power: {{round (divf .gridPower 1000) 3 }} kW\n        Solar power: {{round (divf .pvPower 1000) 3 }} kW\n        Home consumption: {{round (divf .homePower 1000) 3 }} kW\n        {{if .batteryConfigured}}Battery storage status: {{round (divf .batteryPower 1000) 3 }} kW ({{.batterySoc }} %){{end}}\n    disconnect: # vehicle connected event\n      title: "{{.vehicleTitle}} disconnected of Charger {{.title}}"\n      msg: |\n        {{.vehicleTitle}} disconnected of Charger {{.title}} after {{.connectedDuration}}.\n        --------------------------\n        evcc Status {{printf `(%d-%02d-%02d %02d:%02d:%02d)` now.Year now.Month now.Day now.Hour now.Minute now.Second}}\n        Grid power: {{round (divf .gridPower 1000) 3 }} kW\n        Solar power: {{round (divf .pvPower 1000) 3 }} kW\n\n\n        Home consumption: {{round (divf .homePower 1000) 3 }} kW\n        {{if .batteryConfigured}}Battery storage status: {{round (divf .batteryPower 1000) 3 }} kW ({{.batterySoc }} %){{end}}\n'))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"List of all evcc-provided variables"),":"),(0,i.kt)("p",null,"The variables provided by evcc (also see /api/state) must be defined as ",(0,i.kt)("inlineCode",{parentName:"p"},"${<VariableName>}")," or in the go-template format ",(0,i.kt)("inlineCode",{parentName:"p"},"{{<VariableName>}}")," in the message text. Multiple variables in the message text are possible."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Site",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Configuration",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"site"},(0,i.kt)("inlineCode",{parentName:"a"},"siteTitle"))," - Main headline of the evcc app (",(0,i.kt)("em",{parentName:"li"},"string"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"site/#prioritysoc"},(0,i.kt)("inlineCode",{parentName:"a"},"prioritySoc"))," - Minimum Powerwall state of charge in percent before ",(0,i.kt)("a",{parentName:"li",href:"loadpoints/#mode"},"PV mode")," release (",(0,i.kt)("em",{parentName:"li"},"integer"),")"))),(0,i.kt)("li",{parentName:"ul"},"Information",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"batteryConfigured")," - Indicator, home battery/Powerwall meter configured (",(0,i.kt)("em",{parentName:"li"},"bool"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"gridConfigured")," - Indicator, smart/grid meter configured (",(0,i.kt)("em",{parentName:"li"},"bool"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pvConfigured")," - Indicator, solar panels/photovoltaic meter configured (",(0,i.kt)("em",{parentName:"li"},"bool"),")"))))),(0,i.kt)("li",{parentName:"ul"},"Tariff Information",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"tariffs"},(0,i.kt)("inlineCode",{parentName:"a"},"currency"))," - Tariff currency (",(0,i.kt)("em",{parentName:"li"},"string"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"tariffs/#feedin"},(0,i.kt)("inlineCode",{parentName:"a"},"tariffFeedIn"))," - PV feed-in remuneration per kWh in tariff currency (float)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"tariffs/#grid"},(0,i.kt)("inlineCode",{parentName:"a"},"tariffGrid"))," - Grid consumption price per kWh in tariff currency (float)"))),(0,i.kt)("li",{parentName:"ul"},"Meter Information",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"batteryPower")," - Current home battery/Powerwall power in watts (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"batterySoc")," - Current state of charge of home battery/Powerwall in percent (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"gridPower")," - Current grid feed-in(-) or consumption(+) in watts (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"homePower")," - Current home consumption power (excluding Charger consumption) in watts (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pvPower")," - Current solar panels power in watts (",(0,i.kt)("em",{parentName:"li"},"float"),")"))),(0,i.kt)("li",{parentName:"ul"},"Charging Point (loadpoint)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Configuration",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"loadpoints"},(0,i.kt)("inlineCode",{parentName:"a"},"loadpoint"))," - Loadpoint index (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"loadpoints#maxcurrent"},(0,i.kt)("inlineCode",{parentName:"a"},"maxCurrent"))," - Maximum charging current in amperes (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"loadpoints#mincurrent"},(0,i.kt)("inlineCode",{parentName:"a"},"minCurrent"))," - Minimum charging current in amperes (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"loadpoints#min"},(0,i.kt)("inlineCode",{parentName:"a"},"minSoc"))," - Minimum state of charge of the vehicle battery in percent (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"loadpoints/#mode"},(0,i.kt)("inlineCode",{parentName:"a"},"mode"))," - Initial mode of the charging point after evcc start ",(0,i.kt)("inlineCode",{parentName:"li"},"off"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"now"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"min"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"pv")," (",(0,i.kt)("em",{parentName:"li"},"string"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"loadpoints/#phases"},(0,i.kt)("inlineCode",{parentName:"a"},"phases"))," - Initial active number of phases of the charging point after evcc start (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"loadpoints#target"},(0,i.kt)("inlineCode",{parentName:"a"},"targetSoc"))," - Target state of charge of the vehicle battery in percent (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"loadpoints/#title"},(0,i.kt)("inlineCode",{parentName:"a"},"title"))," - Label of the charging point in the evcc app (",(0,i.kt)("em",{parentName:"li"},"string"),")"))),(0,i.kt)("li",{parentName:"ul"},"Information",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"activePhases"),"- Currently active number of phases of the charging point (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"chargeCurrent")," - Current total charging current in amperes (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"chargeCurrents")," - Current charging current per active phase in amperes (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"chargeDuration")," - Charging duration in nanoseconds (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"chargePower")," - Current charging power in watts (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"chargeRemainingDuration")," - Charging time in nanoseconds until the target state of charge (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"chargeRemainingEnergy")," - Required energy until the target state of charge in watt-hours (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"chargedEnergy")," - Energy charged so far in watt-hours (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"charging")," - Indicator, charging process active (",(0,i.kt)("em",{parentName:"li"},"bool"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"enabled")," - Indicator, charging enabled (",(0,i.kt)("em",{parentName:"li"},"bool"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"hasVehicle")," - Indicator, vehicle definitions assigned to the charging point (",(0,i.kt)("em",{parentName:"li"},"bool"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"targetTime")," - Target charging time in nanoseconds since 1970 UTC (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pvAction")," - Control variable for PV timer control ",(0,i.kt)("inlineCode",{parentName:"li"},"enable"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"disable")," (",(0,i.kt)("em",{parentName:"li"},"string"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pvRemaining")," - Required PV remaining charging time with activated timer control in nanoseconds (",(0,i.kt)("em",{parentName:"li"},"integer"),")"))))),(0,i.kt)("li",{parentName:"ul"},"Vehicles (vehicles)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Configuration",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"vehicles/#capacity"},(0,i.kt)("inlineCode",{parentName:"a"},"vehicleCapacity")),"- Capacity of the vehicle battery in watt-hours (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"vehicles/#title"},(0,i.kt)("inlineCode",{parentName:"a"},"vehicleTitle"))," - Label of the vehicle in the evcc app (",(0,i.kt)("em",{parentName:"li"},"string"),")"))),(0,i.kt)("li",{parentName:"ul"},"Information",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"climater")," - Status of vehicle climatisation ",(0,i.kt)("inlineCode",{parentName:"li"},"on"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"off"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"heating"),"/",(0,i.kt)("inlineCode",{parentName:"li"},"cooling")," (",(0,i.kt)("em",{parentName:"li"},"string"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"connected")," - Indicator, vehicle connected to the charging point (",(0,i.kt)("em",{parentName:"li"},"bool"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"connectedDuration")," - Duration of vehicle connection in nanoseconds (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"vehicleOdometer")," - Current vehicle odometer reading in kilometers (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"vehiclePresent")," - Indicator, evcc can access vehicle data (",(0,i.kt)("em",{parentName:"li"},"bool"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"vehicleRange")," - Current vehicle range in kilometers (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"vehicleSoc")," - Current state of charge of the vehicle battery in percent (",(0,i.kt)("em",{parentName:"li"},"integer"),")"))))),(0,i.kt)("li",{parentName:"ul"},"Savings Efficiency Information",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"savingsAmount")," - Sum of evcc savings (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"savingsEffectivePrice")," - Calculated savings price (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"savingsGridCharged")," - Consumed grid energy in Wh (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"savingsSelfConsumptionCharged")," - Consumed solar energy in Wh (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"savingsSelfConsumptionPercent")," - Percentage of consumed solar energy in Wh (",(0,i.kt)("em",{parentName:"li"},"float"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"savingsSince")," - Time period of savings calculation in nanoseconds (",(0,i.kt)("em",{parentName:"li"},"integer"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"savingsTotalCharged")," - Total energy consumed in Wh (",(0,i.kt)("em",{parentName:"li"},"float"),")"))),(0,i.kt)("li",{parentName:"ul"},"Charging Session Information",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionSolarPercentage")," - Solar percentage of the session"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionPrice")," - Price of the charged energy of the session"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionPricePerKWh")," - Average price of energy per kWh of the session"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sessionCO<sub>2</sub>PerKWh")," - Average CO",(0,i.kt)("sub",null,"2")," emissions per kWh"))),(0,i.kt)("li",{parentName:"ul"},"Sponsor",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Configuration",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"sponsortoken"},(0,i.kt)("inlineCode",{parentName:"a"},"auth"))," - Authentication token of the evcc sponsor (",(0,i.kt)("em",{parentName:"li"},"string"),")"))),(0,i.kt)("li",{parentName:"ul"},"Information",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"sponsor")," - Name of the evcc sponsor (",(0,i.kt)("em",{parentName:"li"},"string"),")")))))),(0,i.kt)("h2",{id:"services"},(0,i.kt)("inlineCode",{parentName:"h2"},"services")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"services")," defines a list of message services to be used."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  - type: pushover\n    app: 12345\n    recipients:\n      - 234567\n")),(0,i.kt)("p",null,"The following sections will now explain all the required parameters."),(0,i.kt)("h3",{id:"type"},(0,i.kt)("inlineCode",{parentName:"h3"},"type")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"type")," defines the type of message service to be used."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Possible values"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pushover"),": ",(0,i.kt)("a",{parentName:"li",href:"https://pushover.net/"},"Pushover"),". See ",(0,i.kt)("a",{parentName:"li",href:"#pushover"},(0,i.kt)("inlineCode",{parentName:"a"},"pushover"))," definition"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"telegram"),": ",(0,i.kt)("a",{parentName:"li",href:"https://telegram.org/"},"Telegram Messenger"),". See ",(0,i.kt)("a",{parentName:"li",href:"#telegram"},(0,i.kt)("inlineCode",{parentName:"a"},"telegram"))," definition"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"email"),": Email. See ",(0,i.kt)("a",{parentName:"li",href:"#email"},(0,i.kt)("inlineCode",{parentName:"a"},"email"))," definition"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"shout"),": ","[shoutrrr]","(https://contain")),(0,i.kt)("p",null,"rrr.dev/shoutrrr). See ",(0,i.kt)("a",{parentName:"p",href:"#shout"},(0,i.kt)("inlineCode",{parentName:"a"},"shout"))," definition"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"script"),": Can initiate external scripts to send messages. It's also useful to include any kind of external functionality. See ",(0,i.kt)("a",{parentName:"li",href:"#script"},(0,i.kt)("inlineCode",{parentName:"a"},"script"))," definition")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  - type: pushover\n")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"supported-services"},"Supported Services"),(0,i.kt)("h3",{id:"pushover"},(0,i.kt)("inlineCode",{parentName:"h3"},"pushover")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"pushover")," uses the ",(0,i.kt)("a",{parentName:"p",href:"https://pushover.net/"},"Pushover")," service. Details can be found at ",(0,i.kt)("a",{parentName:"p",href:"https://pushover.net/api"},"Pushover API"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- type: pushover\n  app: # API Token/Key of the created application in Pushover\n  recipients:\n    -  # List of recipients: either User Key or Delivery Group. Groups created in Pushover can be limited to specific devices.\n  devices:\n    - Johns phone\n    - Mias ticker\n")),(0,i.kt)("h3",{id:"telegram"},(0,i.kt)("inlineCode",{parentName:"h3"},"telegram")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"telegram")," uses the ",(0,i.kt)("a",{parentName:"p",href:"https://telegram.org/"},"Telegram Messenger")," service."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- type: telegram\n  token: # bot id : each running instance of evcc needs its own bot id\n  chats:\n    -  # List of chat or group IDs. Each entry requires a - sign in the beginning and must be in a separate line.\n    - -GroupID #Note: Group IDs in Telegram have a - sign\n    - ChatID\n")),(0,i.kt)("h3",{id:"email"},(0,i.kt)("inlineCode",{parentName:"h3"},"email")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"email")," uses the ",(0,i.kt)("a",{parentName:"p",href:"https://containrrr.dev/shoutrrr"},"shoutrrr")," service."),(0,i.kt)("p",null,"Here, the parameter ",(0,i.kt)("inlineCode",{parentName:"p"},"uri")," with the value ",(0,i.kt)("inlineCode",{parentName:"p"},"smtp://<user>:<password>@<host>:<port>/?fromAddress=<from>&toAddresses=<to>")," is expected. The placeholders are to be replaced as follows:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<host>"),": Address (hostname or IP address) of the email server"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<port>"),": Port address of the email server"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<user>"),": Username for the email server"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<password>"),": User password"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<from>"),": Sender's email address"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<to>"),": Recipient's email address")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- type: email\n  uri: smtp://username:password@emailserver.domain:1234/?fromAddress=sender@mail.com&toAddresses=recipient@mail.com\n")),(0,i.kt)("h3",{id:"shout"},(0,i.kt)("inlineCode",{parentName:"h3"},"shout")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"shout")," uses the ",(0,i.kt)("a",{parentName:"p",href:"https://containrrr.dev/shoutrrr"},"shoutrrr")," service and supports all its services."),(0,i.kt)("p",null,"The configuration is shown in the following example using ",(0,i.kt)("a",{parentName:"p",href:"https://gotify.net/"},"Gotify"),", and the same applies to the other options through the same method."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- type: shout\n  uri: gotify://gotify.example.com:443/AzyoeNS.D4iJLVa/?priority=1\n")),(0,i.kt)("p",null,"Further information can be found in the ",(0,i.kt)("a",{parentName:"p",href:"https://containrrr.dev/shoutrrr/v0.5/services/overview/"},"shoutrrr documentation")," on ",(0,i.kt)("a",{parentName:"p",href:"https://containrrr.dev/shoutrrr/v0.5/services/overview/"},"supported services"),"."),(0,i.kt)("h3",{id:"ntfy"},(0,i.kt)("inlineCode",{parentName:"h3"},"ntfy")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ntfy")," uses the ",(0,i.kt)("a",{parentName:"p",href:"https://ntfy.sh"},"ntfy")," service."),(0,i.kt)("p",null,"Here, the parameter ",(0,i.kt)("inlineCode",{parentName:"p"},"uri")," with the value ",(0,i.kt)("inlineCode",{parentName:"p"},"https://<host>/<topics>")," is expected. The placeholders are to be replaced as follows:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<host>"),": Address (hostname or IP address) of the ntfy server"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<topics>"),": Subscribed topic or topics")),(0,i.kt)("p",null,"Optional parameters are ",(0,i.kt)("inlineCode",{parentName:"p"},"priority")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"tags"),". All parameters are passed as strings."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- type: ntfy\n  uri: https://ntfy.sh/evcctestalerts\n  priority: default\n  tags: electric_plug,blue_car\n")),(0,i.kt)("p",null,"Further information can be found in the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.ntfy.sh"},"ntfy documentation"),"."),(0,i.kt)("h3",{id:"script"},(0,i.kt)("inlineCode",{parentName:"h3"},"script")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"script")," starts shell scripts or other commands to send messages or start any action based on the ",(0,i.kt)("a",{parentName:"p",href:"#events"},"events"),"."),(0,i.kt)("p",null,"The path to the script must be specified in ",(0,i.kt)("inlineCode",{parentName:"p"},"cmdline"),". Likewise, a ",(0,i.kt)("inlineCode",{parentName:"p"},"timeout")," should be set. The ",(0,i.kt)("inlineCode",{parentName:"p"},"timeout")," specifies after how much time the script will be aborted."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For example"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- type: script\n  cmdline: /home/pi/sendSignalMessage.sh\n  timeout: 50s\n")))}k.isMDXComponent=!0}}]);