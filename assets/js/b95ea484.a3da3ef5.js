"use strict";(self.webpackChunkevcc_docs=self.webpackChunkevcc_docs||[]).push([[3488],{7226:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>s,frontMatter:()=>p,metadata:()=>l,toc:()=>d});var i=a(7462),n=(a(7294),a(3905));a(828);const p={sidebar_position:5},r="API",l={unversionedId:"reference/api",id:"reference/api",title:"API",description:"Mit evcc kann \xfcber REST und MQTT APIs interagiert werden.",source:"@site/docs/reference/api.md",sourceDirName:"reference",slug:"/reference/api",permalink:"/docs/reference/api",draft:!1,editUrl:"https://github.com/evcc-io/docs/tree/main/docs/reference/api.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Modbus",permalink:"/docs/reference/modbus"},next:{title:"Sponsorship",permalink:"/docs/sponsorship"}},o={},d=[{value:"REST API",id:"rest-api",level:2},{value:"MQTT API",id:"mqtt-api",level:2}],m={toc:d};function s(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,i.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"api"},"API"),(0,n.kt)("p",null,"Mit evcc kann \xfcber REST und MQTT APIs interagiert werden."),(0,n.kt)("p",null,"Alle API IDs (z.B. die Loadpoint ID) beginnen bei ",(0,n.kt)("inlineCode",{parentName:"p"},"1"),"."),(0,n.kt)("h2",{id:"rest-api"},"REST API"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/state"),": evcc state (static configuration and dynamic state as JSON object)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/health"),": evcc health check")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/buffersoc"),": battery buffer SoC (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/prioritysoc"),": battery priority SoC (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/residualpower"),": grid residual power (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/loadpoints/<id>/mode"),": loadpoint charge mode (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/loadpoints/<id>/minsoc"),": loadpoint minimum SoC (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/loadpoints/<id>/targetsoc"),": loadpoint target SoC (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/loadpoints/<id>/phases"),": loadpoint enabled phases (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/loadpoints/<id>/mincurrent"),": loadpoint current minCurrent value (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/loadpoints/<id>/maxcurrent"),": loadpoint current maxCurrent value (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/loadpoints/<id>/enablethreshold"),": loadpoint enable threshold value (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"/api/loadpoints/<id>/disablethreshold"),": loadpoint disable threshold value (writable)"))),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Um schreibbare Einstellungen durchzuf\xfchren, muss eine ",(0,n.kt)("inlineCode",{parentName:"p"},"POST")," HTTP Anfrage gesendet und der zu \xe4ndernde Wert dabei als Segment an die URI angeh\xe4ngt werden.\nBeispiel: ",(0,n.kt)("inlineCode",{parentName:"p"},"curl -X POST http://evcc:7070/api/loadpoints/1/mode/pv")," um den Lademodus des 1. Ladepunkts auf ",(0,n.kt)("inlineCode",{parentName:"p"},"pv")," zu stellen.")),(0,n.kt)("h2",{id:"mqtt-api"},"MQTT API"),(0,n.kt)("p",null,"Die MQTT API folgt der REST API Struktur:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc"),": root topic")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/status"),": status (",(0,n.kt)("inlineCode",{parentName:"p"},"online"),"/",(0,n.kt)("inlineCode",{parentName:"p"},"offline"),")")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/updated"),": timestamp of last update")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/site"),": site dynamic state")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/site/bufferSoC"),": battery buffer SoC (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/site/prioritySoC"),": battery priority SoC (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/site/residualPower"),": grid residual power (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/loadpoints"),": number of available loadpoints")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/loadpoints/<id>"),": loadpoint dynamic state")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/loadpoints/<id>/mode"),": loadpoint charge mode (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/loadpoints/<id>/minSoC"),": loadpoint minimum SoC (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/loadpoints/<id>/targetSoC"),": loadpoint target SoC (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/loadpoints/<id>/phases"),": loadpoint enabled phases (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/loadpoints/<id>/minCurrent"),": loadpoint current minCurrent value (writable)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"evcc/loadpoints/<id>/maxCurrent"),": loadpoint current maxCurrent value (writable)"))),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Um schreibbare Einstellungen durchzuf\xfchren, muss ein ",(0,n.kt)("inlineCode",{parentName:"p"},"/set")," am Ende des Topics hinzugef\xfcgt werden an welches der neue Wert gesendet wird.\nBeispiel: ",(0,n.kt)("inlineCode",{parentName:"p"},'mosquitto_pub -t "evcc/loadpoints/1/phases/set" -m "3"')," um die Anzahl der netzseitigen Phasen am 1. Ladepunkt auf ",(0,n.kt)("inlineCode",{parentName:"p"},"3")," festzulegen.")))}s.isMDXComponent=!0}}]);